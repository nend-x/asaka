local sWRYhSCA = game:GetService("Players")
local hgSDMEIW = sWRYhSCA.LocalPlayer
local StAQfLqq = game:GetService("Workspace")
local bEHWzpsn = game:GetService("RunService")
local AjZDMQSl = game:GetService("UserInputService")
local zpLseJhf = hgSDMEIW:GetMouse() 
local jPcYWIPY = StAQfLqq.CurrentCamera 

local XSLpLKfF = false 
local ibSuqEKw = {}    

local yDePDiKe = {
    "ArmL", "ArmR", "Body", "HandL", "HandR", "Head", "HumanoidRootPart", "LegR", "LegL"
}


local PSYvOMzq = false
local rOZDKGSc = false
local yktfcZbI = nil


local function I(J, K, L)
    local VScmalpD = hgSDMEIW:WaitForChild("PlayerGui"):FindFirstChild("CustomNotifierGui")
    if not VScmalpD then
        VScmalpD = Instance.new("ScreenGui")
        VScmalpD.Name = "CustomNotifierGui"
        VScmalpD.DisplayOrder = 100
        VScmalpD.Parent = hgSDMEIW:WaitForChild("PlayerGui")
    end

    local nJVDgEbW = Instance.new("Frame")
    nJVDgEbW.Size = UDim2.new(0, 250, 0, 70)
    nJVDgEbW.Position = UDim2.new(0.5, -125, 1, 80)
    nJVDgEbW.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    nJVDgEbW.BackgroundTransparency = 0
    nJVDgEbW.AnchorPoint = Vector2.new(0.5, 1)
    nJVDgEbW.CornerRadius = UDim.new(0, 2)
    nJVDgEbW.Parent = VScmalpD

    local zpbLKgkn = Instance.new("TextLabel")
    zpbLKgkn.Size = UDim2.new(1, 0, 0.3, 0)
    zpbLKgkn.Position = UDim2.new(0, 0, 0, 0)
    zpbLKgkn.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
    zpbLKgkn.TextColor3 = Color3.fromRGB(255, 255, 255)
    zpbLKgkn.TextWrapped = true
    zpbLKgkn.TextXAlignment = Enum.TextXAlignment.Left
    zpbLKgkn.TextScaled = true
    zpbLKgkn.Font = Enum.Font.SourceSansBold
    zpbLKgkn.Text = "  " .. J
    zpbLKgkn.BackgroundTransparency = 0
    zpbLKgkn.CornerRadius = UDim.new(0, 3)
    zpbLKgkn.Parent = nJVDgEbW

    local McUnoKSa = Instance.new("TextLabel")
    McUnoKSa.Size = UDim2.new(1, 0, 0.7, 0)
    McUnoKSa.Position = UDim2.new(0, 0, 0.3, 0)
    McUnoKSa.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    McUnoKSa.TextColor3 = Color3.fromRGB(200, 200, 200)
    McUnoKSa.TextWrapped = true
    McUnoKSa.TextXAlignment = Enum.TextXAlignment.Left
    McUnoKSa.TextScaled = true
    McUnoKSa.Font = Enum.Font.SourceSans
    McUnoKSa.Text = "  " .. K
    McUnoKSa.BackgroundTransparency = 0
    McUnoKSa.CornerRadius = UDim.new(0, 3)
    McUnoKSa.Parent = nJVDgEbW

    nJVDgEbW:TweenPosition(UDim2.new(0.5, -125, 1, -10), "Out", "Quad", 0.5, true)

    task.spawn(function()
        task.wait(L)
        nJVDgEbW:TweenPosition(UDim2.new(0.5, -125, 1, 80), "In", "Quad", 0.5, true)
        task.wait(0.5)
        nJVDgEbW:Destroy()
    end)
end


local function Q()
    for R, S in ipairs(ibSuqEKw) do
        if S and S.Parent then
            S:Destroy()
        end
        ibSuqEKw[R] = nil
    end
    ibSuqEKw = {}
end


local function T()
    Q()

    if not XSLpLKfF then return end

    local xLnlHYfI = StAQfLqq:FindFirstChild("WorldObjects")
    if not xLnlHYfI then return end

    for _, sATXqbxK in pairs(xLnlHYfI:GetDescendants()) do
        if sATXqbxK:IsA("Model") and string.match(sATXqbxK.Name, "Assembly%-%d+") then
            if _G.frickletplayerid and sATXqbxK == _G.frickletplayerid then
                continue
            end

            local ZzYhXPWp = sATXqbxK:FindFirstChild("Fricklet")
            if ZzYhXPWp and ZzYhXPWp:IsA("Model") then
                local nKHPXMbq = ZzYhXPWp:FindFirstChild("Body")
                if nKHPXMbq and nKHPXMbq:IsA("BasePart") then
                    local BcBVVRpi = Instance.new("BillboardGui")
                    BcBVVRpi.Name = "FrickletESP"
                    BcBVVRpi.Size = UDim2.new(0, 0, 0, 0)
                    BcBVVRpi.AlwaysOnTop = true
                    BcBVVRpi.StudsOffset = Vector3.new(0, 0, 0)
                    BcBVVRpi.MaxDistance = 0
                    BcBVVRpi.Parent = nKHPXMbq

                    local jcEKJnPt = Instance.new("BoxHandleAdornment")
                    jcEKJnPt.Adornee = nKHPXMbq
                    jcEKJnPt.Color3 = Color3.fromRGB(255, 0, 0)
                    jcEKJnPt.AlwaysOnTop = true
                    jcEKJnPt.Transparency = 0
                    jcEKJnPt.BoxThickness = 2
                    jcEKJnPt.Size = nKHPXMbq.Size + Vector3.new(0.2, 0.2, 0.2) 
                    jcEKJnPt.Visible = true
                    jcEKJnPt.Parent = BcBVVRpi

                    table.insert(ibSuqEKw, BcBVVRpi)
                end
            end
        end
    end
end

StAQfLqq.ChildAdded:Connect(function(a)
    if XSLpLKfF and a:IsA("Model") and string.match(a.Name, "Assembly%-%d+") then
        task.spawn(T)
    end
end)

StAQfLqq.ChildRemoved:Connect(function(b)
    if XSLpLKfF and b:IsA("Model") and string.match(b.Name, "Assembly%-%d+") then
        task.spawn(T)
    end
end)

local gjigwJZa = StAQfLqq:FindFirstChild("WorldObjects")
if gjigwJZa then
    gjigwJZa.DescendantAdded:Connect(function(d)
        if XSLpLKfF and d.Name == "Body" and d:IsA("BasePart") and string.match(d.Parent.Name, "Fricklet") and string.match(d.Parent.Parent.Name, "Assembly%-%d+") then
            task.spawn(T)
        end
    end)
    gjigwJZa.DescendantRemoving:Connect(function(e)
        if XSLpLKfF and e.Name == "Body" and e:IsA("BasePart") and string.match(e.Parent.Name, "Fricklet") and string.match(e.Parent.Parent.Name, "Assembly%-%d+") then
            task.spawn(T)
        end
    end)
end


local function getMouseWorldPosition_esp()
    local wOIQuVKL = jPcYWIPY:ScreenPointToRay(zpLseJhf.X, zpLseJhf.Y)
    local cGWZRVLa = RaycastParams.new()
    cGWZRVLa.FilterDescendantsInstances = {hgSDMEIW.Character}
    cGWZRVLa.FilterType = Enum.RaycastFilterType.Exclude

    local RKelromD = StAQfLqq:Raycast(wOIQuVKL.Origin, wOIQuVKL.Direction * 1000, cGWZRVLa)

    if RKelromD then
        return RKelromD.Position
    else
        return wOIQuVKL.Origin + wOIQuVKL.Direction * 500
    end
end

local function findClosestBodyToMouse_esp()
    local cPBVgNEn = jPcYWIPY.CFrame.Position
    local zoDEKaYl = (getMouseWorldPosition_esp() - cPBVgNEn).Unit
    local ROHQPiWC = nil
    local REbeEOeU = math.huge

    local wegPuDwY = StAQfLqq:FindFirstChild("WorldObjects")
    if not wegPuDwY then return nil end

    for _, UtqQHCub in pairs(wegPuDwY:GetDescendants()) do
        if UtqQHCub:IsA("Model") and string.match(UtqQHCub.Name, "Assembly%-%d+") then
            local XgkyXvCk = UtqQHCub:FindFirstChild("Fricklet")
            if XgkyXvCk and XgkyXvCk:IsA("Model") then
                local zDzodJxS = XgkyXvCk:FindFirstChild("Body")
                if zDzodJxS and zDzodJxS:IsA("BasePart") then
                    if _G.frickletplayerid and UtqQHCub == _G.frickletplayerid then
                        continue
                    end

                    local JOzTCryF = (zDzodJxS.Position - cPBVgNEn).Unit
                    local PBRqJuDL = math.acos(zoDEKaYl:Dot(JOzTCryF))

                    if PBRqJuDL < REbeEOeU then
                        REbeEOeU = PBRqJuDL
                        ROHQPiWC = zDzodJxS
                    end
                end
            end
        end
    end
    return ROHQPiWC
end

local function activateAimbot_esp(targetPart)
    if yktfcZbI then yktfcZbI:Disconnect() end

    yktfcZbI = bEHWzpsn.RenderStepped:Connect(function()
        if not targetPart or not targetPart.Parent then
            rOZDKGSc = false
            if yktfcZbI then yktfcZbI:Disconnect() end
            I("Aimbot", "Aimbot BPFqHFMC lost.", 2)
            return
        end

        local LbpUyxtH = targetPart.Position
        jPcYWIPY.CFrame = CFrame.new(jPcYWIPY.CFrame.Position, LbpUyxtH)
    end)
    I("Aimbot", "Aimbot activated!", 2)
end

local function deactivateAimbot_esp()
    if yktfcZbI then
        yktfcZbI:Disconnect()
        yktfcZbI = nil
    end
    rOZDKGSc = false
    I("Aimbot", "Aimbot deactivated.", 2)
end

local eAlsuzCY = Instance.new("ScreenGui")
eAlsuzCY.Name = "ESPCustomUI"
eAlsuzCY.DisplayOrder = 1
eAlsuzCY.Parent = hgSDMEIW:WaitForChild("PlayerGui")

local yLkTZHDk = Instance.new("Frame")
yLkTZHDk.Size = UDim2.new(0, 250, 0, 100) 
yLkTZHDk.Position = UDim2.new(1, -250, 0.2, -75)
yLkTZHDk.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
yLkTZHDk.BorderColor3 = Color3.fromRGB(15, 15, 15)
yLkTZHDk.BorderSizePixel = 2
yLkTZHDk.Draggable = true
yLkTZHDk.Visible = false
yLkTZHDk.Parent = eAlsuzCY

local LpezyLJW = Instance.new("TextLabel")
LpezyLJW.Size = UDim2.new(1, 0, 0, 30)
LpezyLJW.Position = UDim2.new(0, 0, 0, 0)
LpezyLJW.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
LpezyLJW.TextColor3 = Color3.fromRGB(255, 255, 255)
LpezyLJW.TextWrapped = true
LpezyLJW.Text = "ESP / Aimbot" 
LpezyLJW.Font = Enum.Font.SourceSansBold
LpezyLJW.TextScaled = true
LpezyLJW.Parent = yLkTZHDk


local NoYvZIWt = Instance.new("Frame")
NoYvZIWt.Size = UDim2.new(1, -10, 0, 30)
NoYvZIWt.Position = UDim2.new(0, 5, 0, 35) 
NoYvZIWt.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
NoYvZIWt.BackgroundTransparency = 0
NoYvZIWt.Parent = yLkTZHDk

local AAkGJETw = Instance.new("TextLabel")
AAkGJETw.Size = UDim2.new(0.65, 0, 1, 0)
AAkGJETw.Position = UDim2.new(0, 5, 0, 0)
AAkGJETw.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
AAkGJETw.TextColor3 = Color3.fromRGB(255, 255, 255)
AAkGJETw.TextWrapped = true
AAkGJETw.TextXAlignment = Enum.TextXAlignment.Left
AAkGJETw.Text = "ESP"
AAkGJETw.Font = Enum.Font.SourceSans
AAkGJETw.TextScaled = true
AAkGJETw.Parent = NoYvZIWt

local nelvFSPo = Instance.new("TextButton")
nelvFSPo.Size = UDim2.new(0.3, 0, 0.8, 0)
nelvFSPo.Position = UDim2.new(0.68, -5, 0.1, 0)
nelvFSPo.AnchorPoint = Vector2.new(0, 0)
nelvFSPo.BorderSizePixel = 1
nelvFSPo.BorderColor3 = Color3.fromRGB(150, 150, 150)
nelvFSPo.Font = Enum.Font.SourceSansBold
nelvFSPo.TextWrapped = true
nelvFSPo.Text = XSLpLKfF and "ON" or "OFF"
nelvFSPo.TextColor3 = XSLpLKfF and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
nelvFSPo.BackgroundColor3 = XSLpLKfF and Color3.fromRGB(0, 100, 0) or Color3.fromRGB(100, 0, 0)
nelvFSPo.Parent = NoYvZIWt

nelvFSPo.MouseButton1Click:Connect(function()
    XSLpLKfF = not XSLpLKfF
    nelvFSPo.Text = XSLpLKfF and "ON" or "OFF"
    nelvFSPo.TextColor3 = XSLpLKfF and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
    nelvFSPo.BackgroundColor3 = XSLpLKfF and Color3.fromRGB(0, 100, 0) or Color3.fromRGB(100, 0, 0)
    T()
    I("ESP Status", "ESP " .. (XSLpLKfF and "enabled" or "disabled"), 2)
end)


local eAKFgRGq = Instance.new("Frame")
eAKFgRGq.Size = UDim2.new(1, -10, 0, 30)
eAKFgRGq.Position = UDim2.new(0, 5, 0, 70) 
eAKFgRGq.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
eAKFgRGq.BackgroundTransparency = 0
eAKFgRGq.Parent = yLkTZHDk

local BNcYyhJK = Instance.new("TextLabel")
BNcYyhJK.Size = UDim2.new(0.65, 0, 1, 0)
BNcYyhJK.Position = UDim2.new(0, 5, 0, 0)
BNcYyhJK.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
BNcYyhJK.TextColor3 = Color3.fromRGB(255, 255, 255)
BNcYyhJK.TextWrapped = true
BNcYyhJK.TextXAlignment = Enum.TextXAlignment.Left
BNcYyhJK.Text = "Aimbot (jcEKJnPt)"
BNcYyhJK.Font = Enum.Font.SourceSans
BNcYyhJK.TextScaled = true
BNcYyhJK.Parent = eAKFgRGq

local KKhkICTF = Instance.new("TextButton")
KKhkICTF.Size = UDim2.new(0.3, 0, 0.8, 0)
KKhkICTF.Position = UDim2.new(0.68, -5, 0.1, 0)
KKhkICTF.AnchorPoint = Vector2.new(0, 0)
KKhkICTF.BorderSizePixel = 1
KKhkICTF.BorderColor3 = Color3.fromRGB(150, 150, 150)
KKhkICTF.Font = Enum.Font.SourceSansBold
KKhkICTF.TextWrapped = true
KKhkICTF.Text = PSYvOMzq and "ON" or "OFF"
KKhkICTF.TextColor3 = PSYvOMzq and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
KKhkICTF.BackgroundColor3 = PSYvOMzq and Color3.fromRGB(0, 100, 0) or Color3.fromRGB(100, 0, 0)
KKhkICTF.Parent = eAKFgRGq

KKhkICTF.MouseButton1Click:Connect(function()
    PSYvOMzq = not PSYvOMzq
    KKhkICTF.Text = PSYvOMzq and "ON" or "OFF"
    KKhkICTF.TextColor3 = PSYvOMzq and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
    KKhkICTF.BackgroundColor3 = PSYvOMzq and Color3.fromRGB(0, 100, 0) or Color3.fromRGB(100, 0, 0)
    if not PSYvOMzq and rOZDKGSc then
        deactivateAimbot_esp()
    end
    I("Aimbot Status", "Aimbot " .. (PSYvOMzq and "enabled" or "disabled"), 2)
end)


local function l(m, n)
    local rdgESQYw = string.split(n, ".")
    local hqlEMavV = m
    for q, r in ipairs(rdgESQYw) do
        hqlEMavV = hqlEMavV:WaitForChild(r)
    end
    return hqlEMavV
end

local function s(t)
    yLkTZHDk.Visible = t
    if not t then
        Q()
    end
end

task.spawn(function()
    local FLgRJBBC = l(hgSDMEIW.PlayerGui, "UI.Fone")

    s(FLgRJBBC.Visible)

    FLgRJBBC:GetPropertyChangedSignal("Visible"):Connect(function()
        s(FLgRJBBC.Visible)
    end)
end)

bEHWzpsn.Stepped:Connect(function()
    if XSLpLKfF then
        T()
    end
end)


AjZDMQSl.InputBegan:Connect(function(input, gameProcessedEvent)
    if not gameProcessedEvent and input.KeyCode == Enum.KeyCode.RightControl and PSYvOMzq then
        if rOZDKGSc then
            deactivateAimbot_esp()
        else
            local BPFqHFMC = findClosestBodyToMouse_esp()
            if BPFqHFMC then
                rOZDKGSc = true
                activateAimbot_esp(BPFqHFMC)
            else
                I("Aimbot", "not found.", 2)
            end
        end
    end
end)
